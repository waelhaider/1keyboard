let boards = {

  board1: [ //Ù„ÙØ§Øª
    ["â•”","â•—","â•­","â•®","â”","â”“","","",],
    ["â•š","â•","â•°","â•¯","â”—","â”›","","",],
    ["âŒˆ","âŒ‰","â•’","â••","â•“","â•–","","",],
    ["âŒŠ","âŒ‹","â•˜","â•›","â•™","â•œ","","",],
    ["â”","â”’","â•","â”€","â”","â•¾","","",],
    ["â”–","â”š","=","â‰¡","â‰£","â•¼","","",],
    ["â• ","â•£","â•¬","â•¦","â•©","â•‘","","",],
    ["â•","â”‡","â”‹","â•½","â–Œ","â”¤","","",],
    ["â”£","â”³","â•‹","â”ƒ","â”¬","â”€","","",],
    ["â”«","â”»","â”","â•¿","â”´","â”œ ","","",],
    ["Ç","â","â•¦Ì´","â™","|","â”¼","","",],
   ["âŒœ","âŒ","âŒŒ","âŒ","â”Œ","â”","","",],
   ["âŒ","âŒŸ","âŒ","âŒ","â””","â”˜","","",],
  ],

  board2: [ //Ø´Ø­Ø·Ø§Øª
    ["â”‰","â”…","â•","â”ˆ","â”„","â•Œ","","",],
    ["âƒ","=","â‰¡","Î","â‰£","â–¬","","",],
    ["â–‚","âšŠ","â–”","_","â½","â€“","","",],
    ["á…³","â»","â€¾","Ù€","ê”€","ê”","","",],
    ["ê”","ê—´","ê—¥","ê”£","â…","â","","",],
    ["âŠ¶","âš¯","âš®","ê•¹","ê–’","ê—®","","",],
    ["â¸","â","âš","â‰—","â‰›","â«•â«–","","",],
    ["Ó","â•","â","á´¥","áµœ","âŸ—","","",],
    ["Ğ¶","â™“ï¸","à¦­","âŒ¥","â‘…","ê”†","","",],
    ["ê”…","âŸ¡","ê•º","ê•»","â”â€—","âŒ’","","",],
    ["ï¸¸","ï¹Š","â´â€","ï¹Œ","ä¸·","â«˜","","",],
    ["ï¸·","ï¹","âµâ€","ï¹","âŠâŠ","â«—","","",],
    ["â— ","â€","ï¸¶","â•­âŠ“â•®","","","","",],
    ["â—¡","â€¿","ï¸µ","â•°âŠ”â•¯","","","","",],

   /*ÙƒÙ„ Ø³Ø·Ø± Ù†Ø¶ÙŠÙÙ‡ ØªØ²Ø¯Ø§Ø¯ Ø§Ù„Ø±Ù…ÙˆØ²*/
  ],

  board3: [ //Ø¹ÙƒØ³
   ["à¼»","âŠ°","â‰¼","âŠ€","â‹","â‰¾","","",],
   ["à¼º","âŠ±","â‰½","âŠ","â‹Ÿ","â‰¿","","",],
   ["á“€","âŸ£","â†","â†£","ğ“†©","â‹²","","",],
   ["á“‚","âŸ¢","â†œ","â†¢","ğ“†ª","â‹º","","",],
   ["á”™","Â«","â¸„","à¾€","â¸…","â‹Œ","","",],
   ["á”˜","Â»","â¸…","à½²","â¸…","â‹‹","","",],
   ["à½Œ","à½Š","Ğ®","â‹³","â‹¶","â†¬","","",],
   ["à½‘","à½Š","ê™”","â‹»","â‹½","â†«","","",],
   ["á•™","â‹","å½¡","â«¸","âš","âŸ†","","",],
   ["á•—","â‹‘","ãƒŸ","â«·","âšŸ","âŸ…","","",],
   ["Æ¸","ï´¾","â˜","à½","â†¥","[","","",],
   ["Æ·","ï´¿","â˜œ","à½“","â†§","]","","",],
   ["â«","â«”","âª»","â‹˜","âªƒ","â©¾","","",],
   ["â«","â«“","âª¼","â‹™","âª„","â©½","","",],
   ["ã€”","â‹°","Ñ”â€","âª","â—„","â€·","","",],
   ["ã€•","â‹±","Ñ","â«","â–º","â€´","","",],
   ["â—¤","â—¥","â›","âª","âª‚","","","",],
   ["â—£","â—¢","â","|","â”ƒ","","","",],
   ["â•²","ï¼¼","\\","/","ï¼","â•±","","",],
   ["â•±","ï¼","/","\\","ï¼¼","â•²","","",],
   ["âŸ¦","âŸ§","â©","â©","â©”","â©“","","",],
   ["â‡¨","â‡±","â†‘","à¨¿","à©€","à¸°","","",],
   ["â‡¦","â‡²","â†“","âˆ®","à´¶","à­µ","","",],
 ],
 board4: [ //Ø¯ÙˆØ§Ø¦Ø±
   ["ï¾Ÿ","Ëš","Â°","à¥¦","â¸°","à¼š","","",],
   ["Î¿","â¸°","â—‹","â—","â›","Ù€Ù’","","",],
   ["à¹","Ã¶","Ïƒ","à®ƒ","â­—","âŒ¾","","",],
   ["â—¯","à´ ","â—Œ","â—‰","âœ","â€¢","","",],
   ["á¢€","","à¹‘","ËŠ","à§¹'","Ë–","","",],
   ["âŸ","â—‡","â—ˆ","â—†","â—Š","Â¤","","",],
   ["â€¦",".","Â·","ï½¥","Â¨","Î…","","",],
   ["â‘","â","âŠ¹","âˆ","â˜Œ","â‰","","",],
   ["â‚","â•­à´…â•®","à¼šâ¸°à¥¦Â°Ëš","ËšÂ°à¥¦â¸°à¼š","ËšÂ°à¥¦Î¿à¼š","à¼šÎ¿à¥¦Â°Ëš","","",],
  ["Â¸.â€¢*Â´Â¨","Â¨`*â€¢.Â¸","à¾‰","â–£","â–¢","","","",],
 ],
 board5: [ //Ù†Ø¬ÙˆÙ…
 ["ğŸ¤", "â¤ï¸", "ğŸŠ", "ğŸ’", "ğŸ’–", "ğŸ’˜","","",],
   ["ğŸ’•", "ğŸ’“", "ğŸ‘ˆ", "ğŸ‘‰", "ğŸ’¯", "ğŸ‘","","",],
   ["ğŸ’", "ğŸ“", "ğŸ˜", "ğŸ˜˜", "ğŸŒŸ", "ğŸ§š","","",],
   ["ğŸ’Ÿ", "Â¨ËšÂ°â—¦à¼š", "à¼šâ—¦Â°ËšÂ¨", "ğŸŒ·", "ğŸŒ¹", "ğŸ™","","",],
   ["ğŸ‘‘", "à¿”ğ–¡„à¿”", "ğŸ•Š", "â£", "â™¡", "â¥","","",],
   ["â˜™", "â¦", "âœª", "âœ¤", "âœ¾", "â‰","","",],
   ["â†", "â€", "âœ¿", "âˆ", "âœ«", "â€»","","",],
   ["âœº", "âœ¥", "âœ§", "â»", "âœ¦", "â˜…","","",],
   ["â™›", "â™š", "âœ ", "â™…", "â‚ª", "â˜¬","","",],
   ["âˆ¬", "Â§", "â†¢âœ¥â†£", "â£", "ğ“‡¼", "","","",],
   ["", "â•ê¨„â•", "ê•¥ÍœÍ¡ ÍœÍ¡ê•¥", "âœ¿ÍœÍ¡ ÍœÍ¡âœ¿ÍœÍ¡ ÍœÍ¡âœ¿", "âˆÍœÍ¡ ÍœÍ¡âˆ", "","","",],
   ["âˆ°","â¨ˆ","â©–","â©¨","â©©","Ø„","","",],
   ["Ø","Å¿Ê…","É½É¿","â‡¶","","","","",],

 ],
 board6: [ //ÙŠØ³Ø§Ø±
 ["à®", "áƒ¦", "à¼„", "à¿“", "à¼…", "à¿”","","",],
   ["à¼‰", "áƒ“", "à²Œ", "à¦“", "êˆŠ", "à¿‡","","",],
   ["ê•¥", "á¶á‚‚á€ºá‚ˆ", "áŒ€", "áºá€º", "â„’â„´Ñµâ„¯", "ğ–¡„","","",],
   ["â£â”Š", "â”Šâ£", "á‰", "á–", "á¦", "á´","","",],
   ["áˆ", "á™£", "á•´", "á“", "ê¦", "á™","","",],
   ["à®‰", "á¸", "à¥¡", "áš", "á™›", "á¨","","",],
   ["á¨‹", "à¼†", "ê—", "à¸°", "à¥®", "à¿","","",],
   ["à¥¨", "â£âƒ ğ„Ÿ", "ğ”–", "ğ”‡", "â£", "à¦”","","",],
   ["à¾‰", "à¥®à¥¢à¥ˆà¥£à¥¢", "á€¸", "à¦Š", "àªœ", "à­µ","","",],
   ["É­É²", "á€œá‚„", "â›", "", "", "â‰Í¡Íœà§á­„","","",],
   ["á¬›", "ğ’€±êª³", "à¿”â‰Í¡Íœà§á­„à¿”", "ê¨„", "á¯½", "êªœ","","",],
   ["êª¹", "êª®", "êª‘", "êª¶", "ê«", "êª–","","",],
 ],
};

// Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø³ÙŠØ·
function showNotification(message) {
  const notification = document.createElement('div');
  notification.textContent = message;
  notification.style.position = 'fixed';
  notification.style.top = '20px';
  notification.style.left = '50%';
  notification.style.transform = 'translateX(-50%)';
  notification.style.background = '#4CAF50';
  notification.style.color = 'white';
  notification.style.padding = '8px 12px';
  notification.style.borderRadius = '6px';
  notification.style.zIndex = '10000';
  notification.style.fontSize = '12px';
  notification.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
  document.body.appendChild(notification);
  setTimeout(() => {
    if (document.body.contains(notification)) {
      document.body.removeChild(notification);
    }
  }, 2000);
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ù…Ù† localStorage
function loadCustomBoards() {
    const customBoards = JSON.parse(localStorage.getItem('customBoards') || '{}');
    Object.assign(boards, customBoards);
}

// ØªØ­Ù…ÙŠÙ„ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ù…Ù† localStorage
function loadBoardOrder() {
    boardOrder = JSON.parse(localStorage.getItem('boardOrder') || '[]');
    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØªØ±ØªÙŠØ¨ Ù…Ø­ÙÙˆØ¸ØŒ Ø£Ù†Ø´Ø¦ ØªØ±ØªÙŠØ¨Ø§Ù‹ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
    if (boardOrder.length === 0) {
        boardOrder = ['board1', 'board2', 'board3', 'board4', 'board5', 'board6'];
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©
        Object.keys(boards).forEach(boardKey => {
            if (!boardOrder.includes(boardKey)) {
                boardOrder.push(boardKey);
            }
        });
        saveBoardOrder();
    }
}

// Ø­ÙØ¸ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª ÙÙŠ localStorage
function saveBoardOrder() {
    localStorage.setItem('boardOrder', JSON.stringify(boardOrder));
}

// Ø­ÙØ¸ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© ÙÙŠ localStorage
function saveCustomBoards() {
   const customBoards = {};
   Object.keys(boards).forEach(key => {
     if (!['board1', 'board2', 'board3', 'board4', 'board5', 'board6'].includes(key)) {
       customBoards[key] = boards[key];
     }
   });
   localStorage.setItem('customBoards', JSON.stringify(customBoards));
}

let currentBoard = "board1";
let boardOrder = [];
const mainBoard = document.getElementById("main-board");
const displayBox = document.getElementById("display-box");

// Ù…ØªØºÙŠØ±Ø§Øª Ù„Ù„ØªØ±Ø§Ø¬Ø¹ ÙˆØ§Ù„Ø¥Ø¹Ø§Ø¯Ø©
let textHistory = [];
let historyIndex = -1;
let isUndoing = false;

// Ù…ØªØºÙŠØ±Ø§Øª Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
const saveBtn = document.getElementById("save-btn");
const undoBtn = document.getElementById("undo-btn");
const redoBtn = document.getElementById("redo-btn");
const moreOptionsBtn = document.getElementById("more-options-btn");
const worksSection = document.getElementById("works-section");
const savedTexts = document.getElementById("saved-texts");
const editModal = document.getElementById("edit-modal");
const editTextarea = document.getElementById("edit-textarea");
const saveEditBtn = document.getElementById("save-edit-btn");
const cancelEditBtn = document.getElementById("cancel-edit-btn");

// Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† ÙÙ‡Ø±Ø³ Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ ÙŠØªÙ… ØªØ­Ø±ÙŠØ±Ù‡
let editingIndex = -1;

// Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°ÙŠ ÙŠØªÙ… ØªØ­Ø±ÙŠØ±Ù‡
let editingSymbol = null;

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±

// Ø¯Ø§Ù„Ø© Ø±Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒØ¨ÙŠØ±
function loadBoard(boardName) {
   mainBoard.innerHTML = "";
   boards[boardName].forEach(row => {
     let tr = document.createElement("tr");
     row.forEach(symbol => {
       let td = document.createElement("td");
       td.textContent = symbol;
        /*Ø§Ø¶Ø§ÙØ© Ø§Ù„Ø±Ù…ÙˆØ² Ø¨Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø§Ø®Ø±Ø§Ø¬*/
       td.addEventListener("click", () => {
   const start = displayBox.selectionStart;
   const end = displayBox.selectionEnd;
   const text = displayBox.value;
 /*Ø§Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¹Ù†Ø¯ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¤Ø´Ø±*/
   displayBox.value = text.slice(0, start) + symbol + text.slice(end);
 /*ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù…Ø¤Ø´Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ² Ù…Ø¨Ø§Ø´Ø±Ø©*/
   displayBox.selectionStart = displayBox.selectionEnd = start + symbol.length;
 /*Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ±ÙƒÙŠØ² ÙÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø§Ø®Ø±Ø§Ø¬*/
   displayBox.focus();
   saveToHistoryOnInput();
});

       tr.appendChild(td);
     });
     mainBoard.appendChild(tr);
   });
}

// Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù„ÙˆØ­Ø© ÙÙŠ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
function loadBoardContent(boardName) {
     const boardContent = document.getElementById('board-content');
     boardContent.innerHTML = "";

     // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø«Ø§Ø¨Øª ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
     const boardTitle = document.createElement('div');
     boardTitle.className = 'board-title';
     boardTitle.textContent = getBoardTitle(boardName);
     boardContent.appendChild(boardTitle);

    // Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    const defaultBoards = ['board1', 'board2', 'board3', 'board4', 'board5', 'board6'];
    const isDefaultBoard = defaultBoards.includes(boardName);

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø­ØªÙˆÙ‰ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø©
    const board = boards[boardName];
    const isEmpty = !board || board.length === 0 || (board.length === 1 && (!board[0] || board[0].length === 0));

    if (isEmpty) {
      // Ù„ÙˆØ­Ø© ÙØ§Ø±ØºØ© - Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
      const emptyMessage = document.createElement('div');
      emptyMessage.style.textAlign = 'center';
      emptyMessage.style.padding = '40px 20px';
      emptyMessage.style.color = '#666';
      emptyMessage.style.fontSize = '16px';
      emptyMessage.innerHTML = `
        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“</div>
        <div>Ù‡Ø°Ù‡ Ø§Ù„Ù„ÙˆØ­Ø© ÙØ§Ø±ØºØ©</div>
        <div style="font-size: 14px; margin-top: 10px; color: #999;">Ø§Ø³ØªØ®Ø¯Ù… "Ø±Ù…Ø² +" Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø±Ù…ÙˆØ²</div>
      `;
      boardContent.appendChild(emptyMessage);
      return;
    }

    if (isDefaultBoard) {
      //Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ø¨Ø¹Ø§Ø¯ Ù…Ø±Ø¨Ø¹Ø§Øª Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø±Ù…ÙˆØ²
      const table = document.createElement('table');
      table.id = 'content-table';
      table.style.width = '100%';
      table.style.borderCollapse = 'collapse';

      boards[boardName].forEach(row => {
        let tr = document.createElement("tr");
        row.forEach(symbol => {
          let td = document.createElement("td");
          td.textContent = symbol;
          td.style.border = 'none'; // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
          td.style.height = '35px';
          td.style.fontSize = '22px';
          td.style.fontWeight = 'normal';
          td.style.cursor = 'pointer';
          td.style.textAlign = 'center';
          td.style.verticalAlign = 'middle';
          td.style.background = 'white';
          td.style.borderRadius = '8px'; // Ø­ÙˆØ§Ù Ù…Ø³ØªØ¯ÙŠØ±Ø© Ø£Ø¬Ù…Ù„
          td.style.margin = '3px'; // Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª
          td.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)'; // Ø´Ø§Ø¯Ùˆ Ø®ÙÙŠÙ
          td.style.transition = 'all 0.3s ease'; // Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª
          td.style.display = 'inline-block'; // ÙØµÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø¹Ù† Ø¨Ø¹Ø¶Ù‡Ø§
          td.style.width = '9.9%'; // Ø¹Ø±Ø¶ Ø«Ø§Ø¨Øª Ù„Ù„Ù…Ø±Ø¨Ø¹
          td.style.lineHeight = '30px'; // Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹

          // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ…Ø±ÙŠØ±
          td.onmouseover = () => {
            td.style.background = '#f0f8ff';
            td.style.transform = 'scale(1.05)';
            td.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)'; // Ø´Ø§Ø¯Ùˆ Ø£Ù‚ÙˆÙ‰ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
          };
          td.onmouseout = () => {
            td.style.background = 'white';
            td.style.transform = 'scale(1)';
            td.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)'; // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø´Ø§Ø¯Ùˆ Ø§Ù„Ø£ØµÙ„ÙŠ
          };

          /*Ø§Ø¶Ø§ÙØ© Ø§Ù„Ø±Ù…ÙˆØ² Ø¨Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø§Ø®Ø±Ø§Ø¬*/
          td.addEventListener("click", () => {
            const start = displayBox.selectionStart;
            const end = displayBox.selectionEnd;
            const text = displayBox.value;
            /*Ø§Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¹Ù†Ø¯ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¤Ø´Ø±*/
            displayBox.value = text.slice(0, start) + symbol + text.slice(end);
            /*ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù…Ø¤Ø´Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ² Ù…Ø¨Ø§Ø´Ø±Ø©*/
            displayBox.selectionStart = displayBox.selectionEnd = start + symbol.length;
            /*Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ±ÙƒÙŠØ² ÙÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø§Ø®Ø±Ø§Ø¬*/
            displayBox.focus();
            saveToHistoryOnInput();
          });

          tr.appendChild(td);
        });
        table.appendChild(tr);
      });

      boardContent.appendChild(table);
    } else {
      // Ø¹Ø±Ø¶ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ø¨ØªÙ†Ø³ÙŠÙ‚ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
      boards[boardName].forEach(row => {
        row.forEach(symbol => {
          const symbolDiv = document.createElement('div');
          symbolDiv.className = 'saved-text-item';
          // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø²Ø± Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„ Ù„ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ HTML
          const menuBtn = document.createElement('button');
          menuBtn.className = 'menu-btn';
          menuBtn.textContent = 'â‹®';
          menuBtn.onclick = (e) => {
            e.stopPropagation();
            toggleSymbolMenu(e, boardName, symbol);
          };

          symbolDiv.innerHTML = `<div class="text-content">${symbol.replace(/</g, '<').replace(/>/g, '>')}</div>`;
          const textActions = document.createElement('div');
          textActions.className = 'text-actions';
          textActions.appendChild(menuBtn);
          symbolDiv.appendChild(textActions);

          boardContent.appendChild(symbolDiv);
        });
      });
    }
}

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„ÙˆØ­Ø©
function getBoardTitle(boardName) {
   const titles = {
     board1: "Ù„ÙØ§Øª",
     board2: "Ø´Ø­Ø·Ø§Øª",
     board3: "Ø¹ÙƒØ³",
     board4: "Ø¯ÙˆØ§Ø¦Ø± ÙˆÙ…Ø±Ø¨Ø¹Ø§Øª",
     board5: "Ù†Ø¬ÙˆÙ…",
     board6: "ÙŠØ³Ø§Ø±"
   };
   return titles[boardName] || boardName;
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
document.querySelectorAll("#keywords td").forEach(cell => {
   cell.addEventListener("click", () => {
     let boardName = cell.getAttribute("data-board");

     if (boardName === "board7") {
       // ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ - Ø¥Ø¸Ù‡Ø§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ¥Ø®ÙØ§Ø¡ Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
       worksSection.style.setProperty('display', 'block', 'important');
       document.getElementById('board-content-section').style.display = 'none';
       displaySavedTexts();
     } else if (boards[boardName]) {
       // ØªØ¨ÙˆÙŠØ¨ Ø¢Ø®Ø± - Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ¥Ø®ÙØ§Ø¡ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
       worksSection.style.setProperty('display', 'none', 'important');
       document.getElementById('board-content-section').style.display = 'block';
       currentBoard = boardName;
       loadBoardContent(boardName);
     }
   });
});

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
loadCustomBoards();
loadBoardOrder();
updateTabsDisplay();
loadBoardContent(currentBoard);

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
function saveToHistoryOnInput() {
  if (!isUndoing && (historyIndex === -1 || displayBox.value !== textHistory[historyIndex])) {
    textHistory = textHistory.slice(0, historyIndex + 1);
    textHistory.push(displayBox.value);
    historyIndex = textHistory.length - 1;
  }
}
displayBox.addEventListener('input', saveToHistoryOnInput);

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¶ØºØ·Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©
function handleKeyDown(e) {
  // Ø­ÙØ¸ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù‚Ø¨Ù„ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ù‡Ù…Ø©
  if (e.key === 'Backspace' || e.key === 'Delete' || e.key === 'Enter') {
    setTimeout(() => {
      saveToHistory();
    }, 10);
  }
}

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ±Ø§Ø¬Ø¹
function undo() {
  console.log('Undo called, historyIndex:', historyIndex, 'textHistory length:', textHistory.length);
  console.log('textHistory:', textHistory);

  if (historyIndex > 0) {
    historyIndex--;
    isUndoing = true;
    displayBox.value = textHistory[historyIndex];
    displayBox.focus();
    setTimeout(() => isUndoing = false, 0);
    console.log('Undo successful, new value:', textHistory[historyIndex]);
  } else {
    console.log('Cannot undo - already at beginning');
  }
}

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø¹Ø§Ø¯Ø©
function redo() {
  console.log('Redo called, historyIndex:', historyIndex, 'textHistory length:', textHistory.length);
  console.log('textHistory:', textHistory);

  if (historyIndex < textHistory.length - 1) {
    historyIndex++;
    isUndoing = true;
    displayBox.value = textHistory[historyIndex];
    displayBox.focus();
    setTimeout(() => isUndoing = false, 0);
    console.log('Redo successful, new value:', textHistory[historyIndex]);
  } else {
    console.log('Cannot redo - already at end');
  }
}

// Ø¯Ø§Ù„Ø© Ø­ÙØ¸ Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø£Ùˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù…Ø² ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
function saveText() {
  const text = displayBox.value.trim();
  if (text) {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø±Ù…Ø² ÙŠØªÙ… ØªØ­Ø±ÙŠØ±Ù‡ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©
    if (editingSymbol && editingSymbol.boardName) {
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù…Ø² ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø®ØµØµØ©
      const board = boards[editingSymbol.boardName];
      for (let i = 0; i < board.length; i++) {
        const index = board[i].indexOf(editingSymbol.symbol);
        if (index !== -1) {
          board[i][index] = text;
          saveCustomBoards();
          loadBoardContent(editingSymbol.boardName);
          showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù…Ø² Ø¨Ù†Ø¬Ø§Ø­!');
          editingSymbol = null;
          return;
        }
      }
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© - Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù„ÙˆØ­Ø© Ù…Ø®ØµØµØ©ØŒ Ø£Ø¶Ù Ø§Ù„Ù†Øµ ÙƒØ±Ù…Ø² Ø¬Ø¯ÙŠØ¯
    const defaultBoards = ['board1', 'board2', 'board3', 'board4', 'board5', 'board6'];
    if (!defaultBoards.includes(currentBoard)) {
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Øµ ÙƒØ±Ù…Ø² Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø®ØµØµØ© (ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©)
      const board = boards[currentBoard];
      if (board.length > 0) {
        const firstRow = board[0];
        if (firstRow.length < 6) {
          firstRow.unshift(text);
        } else {
          board.unshift([text]);
        }
      } else {
        board.push([text]);
      }
      saveCustomBoards();
      loadBoardContent(currentBoard);
      showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©!');
      return;
    }

    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù…Ù† localStorage (Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„)
    let savedTextsArray = JSON.parse(localStorage.getItem('savedTexts') || '[]');

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Øµ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
    const timestamp = new Date().toLocaleString('ar-SA');
    if (editingIndex !== -1) {
      // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ù…Ø­ÙÙˆØ¸
      savedTextsArray[editingIndex].text = text;
      savedTextsArray[editingIndex].timestamp = timestamp;
      localStorage.setItem('savedTexts', JSON.stringify(savedTextsArray));
      displaySavedTexts();
      showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ Ø¨Ù†Ø¬Ø§Ø­!');
      editingIndex = -1;
    } else {
      // Ø¥Ø¶Ø§ÙØ© Ù†Øµ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Ø£ÙˆÙ„Ø§Ù‹)
      savedTextsArray.unshift({
        text: text,
        timestamp: timestamp
      });
      localStorage.setItem('savedTexts', JSON.stringify(savedTextsArray));
      displaySavedTexts();
      showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Øµ Ø¨Ù†Ø¬Ø§Ø­!');
    }
  } else {
    alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ù†Øµ Ù„Ù„Ø­ÙØ¸');
  }
}

// Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
function displaySavedTexts() {
  // Ø£Ø¹ÙØ¯ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ù„Ù€body Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ù†ØµÙˆØµ
  const globalMenu = document.getElementById('global-dropdown-menu');
  if (globalMenu && globalMenu.parentElement !== document.body) {
    document.body.appendChild(globalMenu);
    globalMenu.style.display = 'none';
  }
  const savedTextsArray = JSON.parse(localStorage.getItem('savedTexts') || '[]');
  savedTexts.innerHTML = '';
  
  if (savedTextsArray.length === 0) {
    savedTexts.innerHTML = '<p style="text-align: center; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØµÙˆØµ Ù…Ø­ÙÙˆØ¸Ø©</p>';
    return;
  }
  
  // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØµÙˆØµ Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø« Ù„Ù„Ø£Ù‚Ø¯Ù… Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„ØµØ­ÙŠØ­
  const reversedArray = [...savedTextsArray].reverse();
  reversedArray.forEach((item, displayIndex) => {
    const originalIndex = savedTextsArray.length - 1 - displayIndex;
    const textDiv = document.createElement('div');
    textDiv.className = 'saved-text-item';
    textDiv.innerHTML = `
      <div class="text-content">${item.text}</div>
      <div class="text-actions">
        <button class="menu-btn" onclick="toggleMenu(event, ${originalIndex})">â‹®</button>
      </div>
    `;
    savedTexts.appendChild(textDiv);
  });
}

// Ø§Ø³ØªØ¨Ø¯Ù„ Ø¯Ø§Ù„Ø© toggleMenu Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ:
function toggleMenu(event, index) {
  // Ø£Ø²Ù„ Ø£ÙŠ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø³Ø§Ø¨Ù‚Ø©
  const oldMenu = document.getElementById('popup-menu');
  if (oldMenu) oldMenu.remove();

  // Ø§Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  const btn = event.currentTarget || event.target;
  const rect = btn.getBoundingClientRect();

  // Ø£Ù†Ø´Ø¦ Ø¹Ù†ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„ÙƒÙ…Ø¨ÙŠØ±ØªØ± Ø©
  const menu = document.createElement('div');
  menu.id = 'popup-menu';
  menu.style.position = 'fixed';
  menu.style.minWidth = '50px';//Ø¹Ø±Ø¶ Ù„Ø§Ø¦Ø­Ø© Ù†Ø³Ø®
  menu.style.background = '#fff';
  menu.style.border = '1.5px solid #e0e0e0';
  menu.style.boxShadow = '0 8px 24px 0 rgba(0,0,0,0.09),0 1.5px 3px 0 rgba(0,0,0,0.04)';
  menu.style.borderRadius = '10px';
  menu.style.overflow = 'hidden';
  menu.style.zIndex = '99999';
  menu.style.padding = '0';

  // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  const items = [
    { label: 'Ù†Ø³Ø®', action: copyText },
    { label: 'ØªØ­Ø±ÙŠØ±', action: editText },
    { label: 'Ø­Ø°Ù', action: deleteText }
  ];
  items.forEach(item => {
    const div = document.createElement('div');
    div.className = 'dropdown-item';
    div.textContent = item.label;
    div.onclick = () => { item.action(index); closeMenuPop(); };
    div.style.cursor = 'pointer';
    div.style.padding = '6px 10px';//Ø·ÙˆÙ„ ÙˆØ¹Ø±Ø¶ Ø­Ø¬Ù… Ù„Ø§Ø¦Ø­Ø© Ù†Ø³Ø®
    div.style.fontSize = '15px';//Ø­Ø¬Ù… Ø®Ø· Ù„Ø§Ø¦Ø­Ø© Ù†Ø³Ø®
    div.style.borderBottom = '1px solid #f0f0f0';
    div.style.background = '#fff';
    div.style.textAlign = 'right';
    div.onpointerover = () => { div.style.background = '#f3f7fd'; div.style.color = '#2f80ed'; };
    div.onpointerout  = () => { div.style.background = '#fff'; div.style.color = '#262626'; };
    menu.appendChild(div);
  });
  // Ø¥Ø²Ø§Ù„Ø© Ø®Ø· Ø£Ø³ÙÙ„ Ø¢Ø®Ø± Ø¹Ù†ØµØ±
  menu.lastChild.style.borderBottom = 'none';

  // Ø§Ø­Ø³Ø¨ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©: Ø£Ø³ÙÙ„ Ø§Ù„Ø²Ø± Ø£Ùˆ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ø°Ø§ Ø§Ù„Ù…Ø³Ø§ÙØ© ØºÙŠØ± ÙƒØ§ÙÙŠØ©
  const menuHeight = 30 * items.length; // ØªÙ‚Ø¯ÙŠØ± ØªÙ‚Ø±ÙŠØ¨ÙŠ
  const margin = 6;
  let left = rect.right - menu.offsetWidth;
  // Ø­Ø§ÙˆÙ„ Ø¥Ø¸Ù‡Ø§Ø±Ù‡Ø§ Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø²Ø±Ø› Ø¥Ø°Ø§ Ù„Ø§ ØªØªØ³Ø¹ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¹Ù† Ø§Ù„Ø´Ø§Ø´Ø©
  if (left < 4) left = 6;
  if (left + 140 > window.innerWidth) left = window.innerWidth - 140;
  let top;
  if (window.innerHeight - rect.bottom < menuHeight + margin) {
    // Ù„Ù„Ø£Ø¹Ù„Ù‰
    top = rect.top - menuHeight;
    if (top < 2) top = 8;
  } else {
    // Ù„Ù„Ø£Ø³ÙÙ„
    top = rect.bottom;
    if (top + menuHeight + margin > window.innerHeight)
      top = window.innerHeight - menuHeight - margin;
  }
  menu.style.left = left + 'px';
  menu.style.top = top + 'px';

  document.body.appendChild(menu);
  // Ø¯Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù†Ù‚Ø± Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬
  function closeMenuPop(e) {
    if(!e || (e && !menu.contains(e.target) && (!btn.contains(e.target)))) {
      if (menu) menu.remove();
      document.removeEventListener('mousedown', closeMenuPop, true);
    }
  }
  setTimeout(() => {
    document.addEventListener('mousedown', closeMenuPop, true);
  }, 10);
}

// Ø¯Ø§Ù„Ø© Ù†Ø³Ø® Ø§Ù„Ù†Øµ
function copyText(index) {
  const savedTextsArray = JSON.parse(localStorage.getItem('savedTexts') || '[]');
  if (savedTextsArray[index]) {
    navigator.clipboard.writeText(savedTextsArray[index].text).then(() => {
      showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ!');
    }).catch(() => {
      // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù„Ù„Ù†Ø³Ø®
      const textArea = document.createElement('textarea');
      textArea.value = savedTextsArray[index].text;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ!');
    });
  }
  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  document.getElementById('popup-menu').style.display = 'none';
}

// Ø¯Ø§Ù„Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ
function editText(index) {
  const savedTextsArray = JSON.parse(localStorage.getItem('savedTexts') || '[]');
  if (savedTextsArray[index]) {
    editingIndex = index;
    displayBox.value = savedTextsArray[index].text; // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙŠØªÙ… ÙÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
    displayBox.focus();
    saveToHistoryOnInput(); // Ø­ÙØ¸ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Øµ
    // Ù„Ø§ Ù†Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±
    //editModal.style.display = 'block';
  }
  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  document.getElementById('popup-menu').style.display = 'none';
}

// Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ø§Ù„Ù†Øµ
function deleteText(index) {
  if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù†ØµØŸ')) {
    const savedTextsArray = JSON.parse(localStorage.getItem('savedTexts') || '[]');
    savedTextsArray.splice(index, 1);
    localStorage.setItem('savedTexts', JSON.stringify(savedTextsArray));
    displaySavedTexts();
  }
  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  document.getElementById('popup-menu').style.display = 'none';
}

// Ø¯Ø§Ù„Ø© Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
function saveEdit() {
  if (editingIndex !== -1) {
    const savedTextsArray = JSON.parse(localStorage.getItem('savedTexts') || '[]');
    if (savedTextsArray[editingIndex]) {
      savedTextsArray[editingIndex].text = editTextarea.value.trim();
      localStorage.setItem('savedTexts', JSON.stringify(savedTextsArray));
      displaySavedTexts();
      editModal.style.display = 'none';
      editingIndex = -1;
    }
  }
}

// Ø¯Ø§Ù„Ø© Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
function cancelEdit() {
  editModal.style.display = 'none';
  editingIndex = -1;
}

// Ø¯Ø§Ù„Ø© ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ù„ÙˆØ­Ø§Øª
function exportTexts() {
  const savedTextsArray = JSON.parse(localStorage.getItem('savedTexts') || '[]');
  const customBoards = JSON.parse(localStorage.getItem('customBoards') || '{}');
  const boardOrder = JSON.parse(localStorage.getItem('boardOrder') || '[]');

  // Ø¯Ù…Ø¬ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ø¹ Ø§Ù„Ù…Ø®ØµØµØ©
  const allBoards = { ...boards, ...customBoards };

  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨ØªÙ†Ø³ÙŠÙ‚ ÙŠÙˆÙ…/Ø´Ù‡Ø±/Ø³Ù†Ø©/Ø³Ø§Ø¹Ø©/Ø¯Ù‚ÙŠÙ‚Ø©/Øµ,Ù…
  const now = new Date();
  const day = String(now.getDate()).padStart(2, '0');
  const month = String(now.getMonth() + 1).padStart(2, '0');
  const year = now.getFullYear();
  let hours = now.getHours();
  const minutes = String(now.getMinutes()).padStart(2, '0');
  const ampm = hours >= 12 ? 'Ù…' : 'Øµ';
  hours = hours % 12;
  hours = hours ? hours : 12; // Ø§Ù„Ø³Ø§Ø¹Ø© 0 ØªØµØ¨Ø­ 12
  const hours12 = String(hours).padStart(2, '0');
  const dateString = `${day}-${month}-${year}`;
  const timeString = `${hours12}-${minutes}-${ampm}`;
  const fullDateTime = `${day}/${month}/${year}â±ï¸${hours12}:${minutes}:${ampm}`;

  const exportData = {
    savedTexts: savedTextsArray,
    boards: allBoards,
    boardOrder: boardOrder,
    exportDate: fullDateTime
  };

  const data = JSON.stringify(exportData, null, 2);
  const blob = new Blob([data], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `Keyboard_${dateString}.json`;
  a.click();
  URL.revokeObjectURL(url);
  showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
}


// Ø¯Ø§Ù„Ø© Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ù„ÙˆØ­Ø§Øª
function importTexts() {
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = '.json';
  input.onchange = (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target.result);
          if (Array.isArray(data)) {
            // Ù…Ù„Ù Ù‚Ø¯ÙŠÙ… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØµÙˆØµ ÙÙ‚Ø·
            localStorage.setItem('savedTexts', JSON.stringify(data));
            displaySavedTexts();
            showNotification('ØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†ØµÙˆØµ Ø¨Ù†Ø¬Ø§Ø­!');
          } else if (data.savedTexts && data.boards && data.boardOrder) {
            // Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            localStorage.setItem('savedTexts', JSON.stringify(data.savedTexts));
            localStorage.setItem('customBoards', JSON.stringify(data.boards));
            localStorage.setItem('boardOrder', JSON.stringify(data.boardOrder));
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
            Object.assign(boards, data.boards);
            boardOrder = data.boardOrder;
            displaySavedTexts();
            updateTabsDisplay();
            loadBoardContent(currentBoard);
            showNotification('ØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
          } else {
            showNotification('Ù…Ù„Ù JSON ØºÙŠØ± ØµØ­ÙŠØ­');
          }
        } catch {
          showNotification('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù');
        }
      };
      reader.readAsText(file);
    }
  };
  input.click();
}

// Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø¥Ù„Ù‰ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
function addSymbol() {
   const symbol = prompt('Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù…Ø² ØªØ±ÙŠØ¯ Ø¥Ø¶Ø§ÙØªÙ‡ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©');
   if (symbol && symbol.trim()) {
     const board = boards[currentBoard];
     if (board.length > 0) {
       const lastRow = board[board.length - 1];
       if (lastRow.length < 6) { // Ø§ÙØªØ±Ø§Ø¶ 6 Ø±Ù…ÙˆØ² Ù„ÙƒÙ„ Ø³Ø·Ø±
         lastRow.push(symbol.trim());
       } else {
         board.push([symbol.trim()]);
       }
     } else {
       board.push([symbol.trim()]);
     }
     saveCustomBoards(); // Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
     loadBoardContent(currentBoard); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
   }
   // Ù„Ø§ Ù†Ø­ØªØ§Ø¬ Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‡Ù†Ø§ Ù„Ø£Ù† Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø³ØªØºØ·ÙŠÙ‡Ø§
}

// Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø§Ø¦Ù…Ø© Ø±Ù…Ø²
function toggleSymbolMenu(event, boardName, symbol) {
  // Ø£Ø²Ù„ Ø£ÙŠ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø³Ø§Ø¨Ù‚Ø©
  const oldMenu = document.getElementById('symbol-menu');
  if (oldMenu) oldMenu.remove();

  // Ø§Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  const btn = event.currentTarget || event.target;
  const rect = btn.getBoundingClientRect();

  // Ø£Ù†Ø´Ø¦ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ 
  const menu = document.createElement('div');
  menu.id = 'popup-menu';
  menu.style.position = 'fixed';
  menu.style.minWidth = '70px';
  menu.style.background = '#fff';
  menu.style.border = '1.5px solid #e29d78';
  menu.style.boxShadow = '0 8px 24px 0 rgba(0,0,0,0.09),0 1.5px 3px 0 rgba(0,0,0,0.04)';
  menu.style.borderRadius = '10px';
  menu.style.overflow = 'hidden';
  menu.style.zIndex = '99999';
  menu.style.padding = '0';

  // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  const items = [
    { label: 'Ù†Ø³Ø®', action: copySymbol },
    { label: 'ØªØ­Ø±ÙŠØ±', action: editSymbol },
    { label: 'Ø­Ø°Ù', action: deleteSymbol }
  ];
  items.forEach(item => {
    const div = document.createElement('div');
    div.className = 'dropdown-item';
    div.textContent = item.label;
    div.onclick = () => {
      item.action(symbol, boardName);
      const menuToClose = document.getElementById('popup-menu');
      if (menuToClose) menuToClose.remove();
    };
    div.style.cursor = 'pointer';
    div.style.padding = '8px 8px';// ØªØ¨Ø§Ø¹Ø¯ Ø§ÙÙ‚ÙŠ ÙˆØ¹Ù…ÙˆØ¯ÙŠ Ø¨ÙŠÙ† ØªØ­Ø±ÙŠØ± Ù†Ø³Ø®
    div.style.fontSize = '15px';//Ø­Ø¬Ù… Ø®Ø· ØªØ­Ø±ÙŠØ± Ù†Ø³Ø®
    div.style.borderBottom = '2px solid #f0f0f0';
    div.style.background = '#fff';
    div.style.textAlign = 'center';
    div.onpointerover = () => { div.style.background = '#f3f7fd'; div.style.color = '#2f80ed'; };
    div.onpointerout  = () => { div.style.background = '#fff'; div.style.color = '#262626'; };
    menu.appendChild(div);
  });
  // Ø¥Ø²Ø§Ù„Ø© Ø®Ø· Ø£Ø³ÙÙ„ Ø¢Ø®Ø± Ø¹Ù†ØµØ±
  menu.lastChild.style.borderBottom = 'none';

  // Ø§Ø­Ø³Ø¨ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  const menuHeight = 35 * items.length;
  const margin = 6;
  let left = rect.right - menu.offsetWidth;
  if (left < 4) left = 6;
  if (left + 100 > window.innerWidth) left = window.innerWidth - 100;
  let top;
  if (window.innerHeight - rect.bottom < menuHeight + margin) {
    top = rect.top - menuHeight;
    if (top < 2) top = 8;
  } else {
    top = rect.bottom;
    if (top + menuHeight + margin > window.innerHeight)
      top = window.innerHeight - menuHeight - margin;
  }
  menu.style.left = left + 'px';
  menu.style.top = top + 'px';

  document.body.appendChild(menu);
  // Ø¯Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù†Ù‚Ø± Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬
  function closeMenuPop(e) {
    if(!e || (e && !menu.contains(e.target) && (!btn.contains(e.target)))) {
      if (menu) menu.remove();
      document.removeEventListener('mousedown', closeMenuPop, true);
    }
  }
  setTimeout(() => {
    document.addEventListener('mousedown', closeMenuPop, true);
  }, 10);
}

// Ø¯Ø§Ù„Ø© Ù†Ø³Ø® Ø§Ù„Ø±Ù…Ø²
function copySymbol(symbol) {
  navigator.clipboard.writeText(symbol).then(() => {
    showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ù…Ø²!');
  }).catch(() => {
    // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù„Ù„Ù†Ø³Ø®
    const textArea = document.createElement('textarea');
    textArea.value = symbol;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ù…Ø²!');
  });
}

// Ø¯Ø§Ù„Ø© ØªØ­Ø±ÙŠØ± Ø§Ù„Ø±Ù…Ø²
function editSymbol(symbol, boardName) {
  // Ù†Ø³Ø® Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù†Øµ Ù…Ø«Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
  displayBox.value = symbol;
  displayBox.focus();
  saveToHistoryOnInput();
  // Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°ÙŠ ÙŠØªÙ… ØªØ­Ø±ÙŠØ±Ù‡
  editingSymbol = { symbol: symbol, boardName: boardName };
}

// Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ø§Ù„Ø±Ù…Ø²
function deleteSymbol(symbol, boardName) {
  if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø²ØŸ')) {
    removeSymbolFromBoard(boardName, symbol);
  }
}

// Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ø±Ù…Ø² Ù…Ù† Ù„ÙˆØ­Ø© Ù…Ø­Ø¯Ø¯Ø©
function removeSymbolFromBoard(boardName, symbol) {
  const board = boards[boardName];
  for (let i = 0; i < board.length; i++) {
    const index = board[i].indexOf(symbol);
    if (index !== -1) {
      board[i].splice(index, 1);
      // Ø¥Ø°Ø§ Ø£ØµØ¨Ø­ Ø§Ù„Ø³Ø·Ø± ÙØ§Ø±ØºØ§Ù‹ØŒ Ø§Ø­Ø°ÙÙ‡
      if (board[i].length === 0) {
        board.splice(i, 1);
      }
      saveCustomBoards(); // Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
      loadBoardContent(boardName); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
      return;
    }
  }
}

// Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ø±Ù…Ø² Ù…Ù† Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
function removeSymbol() {
   const symbol = prompt('Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù…Ø² Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø¥Ø²Ø§Ù„ØªÙ‡');
   if (symbol) {
     removeSymbolFromBoard(currentBoard, symbol);
   }
   // Ù„Ø§ Ù†Ø­ØªØ§Ø¬ Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‡Ù†Ø§ Ù„Ø£Ù† Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø³ØªØºØ·ÙŠÙ‡Ø§
}

// Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
function toggleMainDropdown(event) {
  // Ø£Ø²Ù„ Ø£ÙŠ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø³Ø§Ø¨Ù‚Ø©
  const oldMenu = document.getElementById('main-dropdown-menu');
  if (oldMenu) oldMenu.remove();

  // Ø§Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  const btn = event.currentTarget || event.target;
  const rect = btn.getBoundingClientRect();

  // Ø£Ù†Ø´Ø¦ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  const menu = document.createElement('div');
  menu.id = 'main-dropdown-menu';
  menu.style.position = 'fixed';
  menu.style.minWidth = '120px';// Ø¹Ø±Ø¶ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  menu.style.background = '#fff';
  menu.style.border = '2px solid #e29d78';
  menu.style.boxShadow = '0 8px 24px 0 rgba(0,0,0,0.09),0 1.5px 3px 0 rgba(0,0,0,0.04)';
  menu.style.borderRadius = '10px';
  menu.style.overflow = 'hidden';
  menu.style.zIndex = '99999';
  menu.style.padding = '0';

  // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø©
   const items = [
     { label: 'Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© ', action: createBoard },
     { label: 'Ø­Ø°Ù Ù„ÙˆØ­Ø© ', action: deleteBoard },
     { label: 'ØªØ¹Ø¯ÙŠÙ„ Ù„ÙˆØ­Ø©', action: renameBoard },
     { label: 'ØªØ±ØªÙŠØ¨ Ù„ÙˆØ­Ø§Øª', action: arrangeBoards },
     { label: 'Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² ', action: addSymbol },
     { label: 'Ø­Ø°Ù Ø±Ù…Ø² ', action: removeSymbol },
     { label: 'Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ğŸ“¥', action: importTexts },
     { label: 'ØªØµØ¯ÙŠØ± ğŸ“¤', action: exportTexts }
   ];
  items.forEach(item => {
    const div = document.createElement('div');
    div.className = 'dropdown-item';
    div.textContent = item.label;
    div.onclick = () => { item.action(); closeMainMenu(); };
    div.style.cursor = 'pointer';
    div.style.padding = '8px 6px';//Ù…ÙƒØ§Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    div.style.fontSize = '14px';//Ø­Ø¬Ù… Ø®Ø· Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    div.style.borderBottom = '2px solid #f0f0f0';
    div.style.background = '#fff';
    div.style.textAlign = 'right';
    div.onpointerover = () => { div.style.background = '#f3f7fd'; div.style.color = '#2f80ed'; };
    div.onpointerout  = () => { div.style.background = '#fff'; div.style.color = '#262626'; };
    menu.appendChild(div);
  });
  // Ø¥Ø²Ø§Ù„Ø© Ø®Ø· Ø£Ø³ÙÙ„ Ø¢Ø®Ø± Ø¹Ù†ØµØ±
  menu.lastChild.style.borderBottom = 'none';

  // Ø§Ø­Ø³Ø¨ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©: Ø£Ø³ÙÙ„ Ø§Ù„Ø²Ø± Ø£Ùˆ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ø°Ø§ Ø§Ù„Ù…Ø³Ø§ÙØ© ØºÙŠØ± ÙƒØ§ÙÙŠØ©
  const menuHeight = 35 * items.length;
  const margin = 6;
  let left = rect.right - menu.offsetWidth;
  if (left < 4) left = 6;
  if (left + 160 > window.innerWidth) left = window.innerWidth - 160;
  let top;
  if (window.innerHeight - rect.bottom < menuHeight + margin) {
    top = rect.top - menuHeight;
    if (top < 2) top = 8;
  } else {
    top = rect.bottom;
    if (top + menuHeight + margin > window.innerHeight)
      top = window.innerHeight - menuHeight - margin;
  }
  menu.style.left = left + 'px';
  menu.style.top = top + 'px';

  document.body.appendChild(menu);
  // Ø¯Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù†Ù‚Ø± Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬
  function closeMainMenu(e) {
    if(!e || (e && !menu.contains(e.target) && (!btn.contains(e.target)))) {
      if (menu) menu.remove();
      document.removeEventListener('mousedown', closeMainMenu, true);
    }
  }
  setTimeout(() => {
    document.addEventListener('mousedown', closeMainMenu, true);
  }, 10);
}

// Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„ÙˆØ­Ø§Øª
function createBoard() {
    const boardName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');
    if (boardName && boardName.trim()) {
      const boardKey = boardName.trim(); // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…ÙØ¯Ø®Ù„ ÙƒÙ…ÙØªØ§Ø­
      boards[boardKey] = [[]]; // Ù„ÙˆØ­Ø© ÙØ§Ø±ØºØ©
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ Ù†Ù‡Ø§ÙŠØ© boardOrder
      boardOrder.push(boardKey);
      saveCustomBoards();
      saveBoardOrder();
      updateTabsDisplay();
      // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      currentBoard = boardKey;
      loadBoardContent(boardKey);
      showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø© Ø¨Ù†Ø¬Ø§Ø­!');
    }
}

function deleteBoard() {
    const boardNames = Object.keys(boards).filter(key => !['board1', 'board2', 'board3', 'board4', 'board5', 'board6'].includes(key));
    if (boardNames.length === 0) {
      alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„ÙˆØ­Ø§Øª Ù…Ø®ØµØµØ© Ù„Ù„Ø­Ø°Ù');
      return;
    }

    const boardToDelete = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø­Ø°ÙÙ‡Ø§:\n' + boardNames.join('\n'));
    if (boardToDelete && boardNames.includes(boardToDelete)) {
      delete boards[boardToDelete];
      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù„ÙˆØ­Ø© Ù…Ù† boardOrder
      const index = boardOrder.indexOf(boardToDelete);
      if (index !== -1) {
        boardOrder.splice(index, 1);
        saveBoardOrder();
      }
      saveCustomBoards();
      updateTabsDisplay();
      // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ© Ù‡ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŒ Ø§Ù†ØªÙ‚Ù„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
      if (currentBoard === boardToDelete) {
        currentBoard = 'board1';
        loadBoardContent('board1');
      }
      showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù„ÙˆØ­Ø© Ø¨Ù†Ø¬Ø§Ø­!');
    }
}

function renameBoard() {
    const boardNames = Object.keys(boards).filter(key => !['board1', 'board2', 'board3', 'board4', 'board5', 'board6'].includes(key));
    if (boardNames.length === 0) {
      alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„ÙˆØ­Ø§Øª Ù…Ø®ØµØµØ© Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù…Ù‡Ø§');
      return;
    }

    const oldName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§:\n' + boardNames.join('\n'));
    if (oldName && boardNames.includes(oldName)) {
      const newName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯:');
      if (newName && newName.trim()) {
        boards[newName] = boards[oldName];
        delete boards[oldName];
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ¹Ø§Ø¯ ØªØ³Ù…ÙŠØªÙ‡Ø§ Ù‡ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŒ Ø­Ø¯Ø« currentBoard
        if (currentBoard === oldName) {
          currentBoard = newName;
        }
        // ØªØ­Ø¯ÙŠØ« boardOrder
        const index = boardOrder.indexOf(oldName);
        if (index !== -1) {
          boardOrder[index] = newName;
          saveBoardOrder();
        }
        saveCustomBoards();
        updateTabsDisplay();
        showNotification('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ù„ÙˆØ­Ø© Ø¨Ù†Ø¬Ø§Ø­!');
      }
    }
}

// Ø¯Ø§Ù„Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª
function arrangeBoards() {
    // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª
    const modal = document.createElement('div');
    modal.style.position = 'fixed';
    modal.style.top = '0';
    modal.style.left = '0';
    modal.style.width = '80%';//Ø¹Ø±Ø¶ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª 
    modal.style.height = '100%';//Ø§Ø±ØªÙØ§Ø¹ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø§Øª
    modal.style.backgroundColor = 'rgba(0,0,0,0.5)';
    modal.style.display = 'flex';
    modal.style.justifyContent = 'center';
    modal.style.alignItems = 'center';
    modal.style.zIndex = '10000';

    const modalContent = document.createElement('div');
    modalContent.style.backgroundColor = 'white';
    modalContent.style.padding = '35px';// Ø§Ø¨ØªØ¹Ø§Ø¯ Ø§Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù† Ø§Ù„Ø­ÙˆØ§Ù
    modalContent.style.borderRadius = '10px';
    modalContent.style.maxWidth = '400px';
    modalContent.style.width = '90%';
    modalContent.style.maxHeight = '70vh';//Ø§Ø±ØªÙØ§Ø¹ Ø­Ø§ÙˆÙŠØ© Ø§Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
    modalContent.style.overflowY = 'auto';

    const title = document.createElement('h5');
    title.textContent = 'ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª';
    title.style.textAlign = 'center';
    title.style.marginBottom = '10px';//Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠØª ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª ÙˆØªØ­ØªÙ‡Ø§
    modalContent.appendChild(title);

    const boardList = document.createElement('div');
    boardList.style.display = 'flex';
    boardList.style.flexDirection = 'column';
    boardList.style.gap = '10px';//Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø¨Ø§Ù„ØªØ¹Ø¯ÙŠÙ„

    // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ø¯Ø¹Ù… Ø§Ù„Ø³Ø­Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ù…Ø³ÙŠØ©
    let draggedElement = null;
    let draggedIndex = -1;
    let placeholder = null;
    let startY = 0;
    let currentY = 0;

    // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨
    boardOrder.forEach((boardKey, index) => {
        if (boards[boardKey]) {
            const boardItem = document.createElement('div');
            boardItem.style.padding = '10px';//Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ø³ØªØ·ÙŠÙ„ Ø§Ù„Ù…ÙƒØªÙˆØ¨ ÙÙŠÙ‡ Ø§Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
            boardItem.style.width = '0%';//Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ·ÙŠÙ„ Ø§Ù„Ø£ÙÙ‚ÙŠ
            boardItem.style.maxWidth = '350px';//Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ‚ÙŠ
            boardItem.style.minWidth = '140px';//Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ‚ÙŠ
            boardItem.style.backgroundColor = '#f5f5f5';
            boardItem.style.border = '1px solid #ddd';
            boardItem.style.borderRadius = '5px';
            boardItem.style.cursor = 'move';
            boardItem.style.display = 'flex';
            boardItem.style.alignItems = 'center';
            boardItem.style.gap = '10px';//Ù…ÙƒØ§Ù† ÙƒÙ„Ù…Ø© Ø§Ø³Ù… Ø§Ù„Ù„ÙˆØ­Ø§Øª Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
            boardItem.draggable = true;
            boardItem.dataset.boardKey = boardKey;
            boardItem.dataset.index = index;

            const dragHandle = document.createElement('span');
            dragHandle.textContent = 'â‹®â‹®';
            dragHandle.style.cursor = 'move';
            dragHandle.style.userSelect = 'none';

            const boardName = document.createElement('span');
            boardName.textContent = getBoardTitle(boardKey);

            boardItem.appendChild(dragHandle);
            boardItem.appendChild(boardName);
            boardList.appendChild(boardItem);

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±
            boardItem.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', index.toString());
                boardItem.style.opacity = '0.5';
            });

            boardItem.addEventListener('dragend', () => {
                boardItem.style.opacity = '1';
            });

            boardItem.addEventListener('dragover', (e) => {
                e.preventDefault();
                boardItem.style.borderTop = '2px solid #007bff';
            });

            boardItem.addEventListener('dragleave', () => {
                boardItem.style.borderTop = '1px solid #ddd';
            });

            boardItem.addEventListener('drop', (e) => {
                e.preventDefault();
                boardItem.style.borderTop = '1px solid #ddd';
                const draggedIndex = parseInt(e.dataTransfer.getData('text/plain'));
                const targetIndex = index;

                if (draggedIndex !== targetIndex) {
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ØµÙÙˆÙØ©
                    const draggedItem = boardOrder.splice(draggedIndex, 1)[0];
                    boardOrder.splice(targetIndex, 0, draggedItem);

                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ DOM
                    const draggedElement = boardList.children[draggedIndex];
                    if (targetIndex < draggedIndex) {
                        boardList.insertBefore(draggedElement, boardItem);
                    } else {
                        boardList.insertBefore(draggedElement, boardItem.nextSibling);
                    }
                    // ØªØ­Ø¯ÙŠØ« data-index Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
                    updateIndexes();
                }
            });

            // Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ù… Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ù…Ø³ÙŠØ©
            boardItem.addEventListener('touchstart', (e) => {
                draggedElement = boardItem;
                draggedIndex = index;
                startY = e.touches[0].clientY;
                currentY = startY;
                boardItem.style.opacity = '0.5';

                // Ø¥Ù†Ø´Ø§Ø¡ placeholder
                placeholder = document.createElement('div');
                placeholder.style.height = boardItem.offsetHeight + 'px';
                placeholder.style.backgroundColor = 'transparent';
                boardList.insertBefore(placeholder, boardItem);
                boardList.insertBefore(boardItem, placeholder);
            });

            boardItem.addEventListener('touchmove', (e) => {
                if (!draggedElement) return;
                e.preventDefault();
                currentY = e.touches[0].clientY;

                // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø¹Ù†ØµØ±
                const deltaY = currentY - startY;
                boardItem.style.transform = `translateY(${deltaY}px)`;
                boardItem.style.zIndex = '1000';

                // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                const rect = boardList.getBoundingClientRect();
                const y = currentY - rect.top;
                let newIndex = Math.floor(y / boardItem.offsetHeight);

                if (newIndex < 0) newIndex = 0;
                if (newIndex >= boardOrder.length) newIndex = boardOrder.length - 1;

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù†Ø§ØµØ±
                if (newIndex !== draggedIndex) {
                    const children = Array.from(boardList.children).filter(child => child !== draggedElement && child !== placeholder);
                    children.splice(newIndex, 0, placeholder);
                    children.forEach(child => {
                        if (child !== draggedElement) {
                            boardList.appendChild(child);
                        }
                    });
                    draggedIndex = newIndex;
                }
            });

            boardItem.addEventListener('touchend', (e) => {
                if (!draggedElement) return;

                boardItem.style.opacity = '1';
                boardItem.style.transform = '';
                boardItem.style.zIndex = '';

                // ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù†ØµØ± ÙÙŠ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                if (placeholder) {
                    boardList.insertBefore(boardItem, placeholder);
                    boardList.removeChild(placeholder);
                }

                // ØªØ­Ø¯ÙŠØ« boardOrder
                const newOrder = [];
                Array.from(boardList.children).forEach(child => {
                    if (child.dataset.boardKey) {
                        newOrder.push(child.dataset.boardKey);
                    }
                });
                boardOrder = newOrder;

                draggedElement = null;
                draggedIndex = -1;
                placeholder = null;
                updateIndexes();
            });
        }
    });

    // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« data-index Ù„Ù„Ø¹Ù†Ø§ØµØ±
    function updateIndexes() {
        Array.from(boardList.children).forEach((child, index) => {
            if (child.dataset) {
                child.dataset.index = index;
            }
        });
    }

    modalContent.appendChild(boardList);

    const buttonContainer = document.createElement('div');
    buttonContainer.style.display = 'flex';
    buttonContainer.style.justifyContent = 'space-between';
    buttonContainer.style.marginTop = '10px';
    buttonContainer.style.gap = '10px';

    const saveButton = document.createElement('button');
    saveButton.textContent = 'Ø­ÙØ¸';
    saveButton.style.padding = '10px 20px';
    saveButton.style.backgroundColor = '#28a745';
    saveButton.style.color = 'white';
    saveButton.style.border = 'none';
    saveButton.style.borderRadius = '5px';
    saveButton.style.cursor = 'pointer';
    saveButton.onclick = () => {
        saveBoardOrder();
        updateTabsDisplay();
        document.body.removeChild(modal);
        showNotification('ØªÙ… Ø­ÙØ¸ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª!');
    };

    const cancelButton = document.createElement('button');
    cancelButton.textContent = 'Ø¥Ù„ØºØ§Ø¡';
    cancelButton.style.padding = '10px 20px';
    cancelButton.style.backgroundColor = '#dc3545';
    cancelButton.style.color = 'white';
    cancelButton.style.border = 'none';
    cancelButton.style.borderRadius = '5px';
    cancelButton.style.cursor = 'pointer';
    cancelButton.onclick = () => {
        document.body.removeChild(modal);
    };

    buttonContainer.appendChild(saveButton);
    buttonContainer.appendChild(cancelButton);
    modalContent.appendChild(buttonContainer);

    modal.appendChild(modalContent);
    document.body.appendChild(modal);

    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            document.body.removeChild(modal);
        }
    });

    // Ù„Ø§ Ù†Ø­ØªØ§Ø¬ Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‡Ù†Ø§ Ù„Ø£Ù† Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø³ØªØºØ·ÙŠÙ‡Ø§
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
function updateTabsDisplay() {
    const keywordsTable = document.querySelector('#keywords');
    const existingTabs = ['board1', 'board2', 'board3', 'board4', 'board5', 'board6'];

    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    keywordsTable.rows[0].innerHTML = '';

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ±ØªÙŠØ¨
    boardOrder.forEach(boardKey => {
        if (boards[boardKey]) {
            const newTab = document.createElement('td');
            newTab.textContent = getBoardTitle(boardKey);
            newTab.setAttribute('data-board', boardKey);
            if (!existingTabs.includes(boardKey)) {
                newTab.setAttribute('data-custom', 'true');
            }
            keywordsTable.rows[0].appendChild(newTab);
        }
    });

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    document.querySelectorAll("#keywords td").forEach(cell => {
      cell.addEventListener("click", () => {
        let boardName = cell.getAttribute("data-board");

        if (boardName === "board7") {
          // ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ - Ø¥Ø¸Ù‡Ø§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ¥Ø®ÙØ§Ø¡ Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
          worksSection.style.setProperty('display', 'block', 'important');
          document.getElementById('board-content-section').style.display = 'none';
          displaySavedTexts();
        } else if (boards[boardName]) {
          // ØªØ¨ÙˆÙŠØ¨ Ø¢Ø®Ø± - Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ¥Ø®ÙØ§Ø¡ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
          worksSection.style.setProperty('display', 'none', 'important');
          document.getElementById('board-content-section').style.display = 'block';
          currentBoard = boardName;
          loadBoardContent(boardName);
        }
      });
    });
}

// Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
saveBtn.addEventListener('click', saveText);
undoBtn.addEventListener('click', undo);
redoBtn.addEventListener('click', redo);
moreOptionsBtn.addEventListener('click', toggleMainDropdown);

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
loadCustomBoards();
loadBoardOrder();
updateTabsDisplay();

// Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ø¶ØºØ·Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©
displayBox.addEventListener('keydown', handleKeyDown);

// Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ù„Ù„ÙƒØªØ§Ø¨Ø© Ù„Ø­ÙØ¸ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø­Ø±ÙØ§Ù‹ Ø¨Ø­Ø±Ù
// Ø§Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙƒÙˆØ§Ø¯ saveToHistory/saveToHistoryImmediate/saveToHistoryMobile ÙˆØ§Ø±ØªØ¨Ø§Ø·Ù‡Ø§ input/keydown/lastSaveTime ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ£Ø³ÙÙ„.
// ÙÙ‚Ø· Ø§Ø¨Ù‚Ù Ø§Ù„ØªØ§Ø±ÙŠØ® ÙŠÙØ¨Ù†Ù‰ Ø¹Ø¨Ø± saveToHistoryOnInput Ø§Ù„Ø­Ø¯ÙŠØ«Ø©.

// Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±
saveEditBtn.addEventListener('click', saveEdit);
cancelEditBtn.addEventListener('click', cancelEdit);

// Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
document.addEventListener('click', (e) => {
  // Ø¥ØºÙ„Ø§Ù‚ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø±Ù…ÙˆØ² ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
  if (!e.target.closest('.text-actions')) {
    document.querySelectorAll('.dropdown-menu').forEach(menu => {
      menu.style.display = 'none';
    });
  }

  // Ø¥ØºÙ„Ø§Ù‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  const mainMenu = document.getElementById('main-dropdown-menu');
  if (mainMenu && !mainMenu.contains(e.target) && e.target !== moreOptionsBtn) {
    mainMenu.remove();
  }

  // Ø¥ØºÙ„Ø§Ù‚ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø±Ù…ÙˆØ² ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©
  const symbolMenu = document.getElementById('popup-menu');
  if (symbolMenu && !symbolMenu.contains(e.target) && !e.target.closest('.menu-btn')) {
    symbolMenu.remove();
  }
});

// Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ù… Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ù…Ø³ÙŠØ© (Ø§Ù„Ø¬ÙˆØ§Ù„)
document.addEventListener('touchstart', (e) => {
  // Ø¥ØºÙ„Ø§Ù‚ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø±Ù…ÙˆØ² ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
  if (!e.target.closest('.text-actions')) {
    document.querySelectorAll('.dropdown-menu').forEach(menu => {
      menu.style.display = 'none';
    });
  }

  // Ø¥ØºÙ„Ø§Ù‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  const mainMenu = document.getElementById('main-dropdown-menu');
  if (mainMenu && !mainMenu.contains(e.target) && e.target !== moreOptionsBtn) {
    mainMenu.remove();
  }

  // Ø¥ØºÙ„Ø§Ù‚ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø±Ù…ÙˆØ² ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©
  const symbolMenu = document.getElementById('popup-menu');
  if (symbolMenu && !symbolMenu.contains(e.target) && !e.target.closest('.menu-btn')) {
    symbolMenu.remove();
  }
});

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ø§Ù„Ù†Øµ Ø§Ù„ÙØ§Ø±Øº
textHistory.push('');
historyIndex = 0;

// Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„
console.log('=== Keyboard App Loaded ===');

// Ø¥Ø®ÙØ§Ø¡ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
worksSection.style.display = 'none';
// Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
document.getElementById('board-content-section').style.display = 'block';
